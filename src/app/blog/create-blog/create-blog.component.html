<div class="container mt-3 d-flex justify-content-center">
  <div class="card shadow-sm form-container">

    <!-- Encabezado -->
    <div class="card-header bg-danger text-white text-center py-3">
      <h3 class="mb-0"><i class="fa-solid fa-pen-to-square"></i> Crear Blog</h3>
    </div>

    <!-- Contenido del Formulario -->
    <div class="card-body p-4">
      <form #formAuto="ngForm" name="form-gral" enctype="multipart/form-data">

        <!-- Slug -->
        <div class="mb-3">
          <label class="form-label"><i class="fa-solid fa-link"></i> Slug</label>
          <input #slug type="text" class="form-control" placeholder="ejemplo-slug" [(ngModel)]="blogModel.url"
            name="slug">
        </div>

        <!-- H1 -->
        <div class="mb-3">
          <label class="form-label"><i class="fa-solid fa-heading"></i> H1</label>
          <input type="text" class="form-control" placeholder="Ingresa h1" [(ngModel)]="blogModel.h1" name="h1">
        </div>

        <!-- Imagen Card -->
        <div class="mb-3">
          <div class="form-row d-flex">
            <div class="form-group col-md-6">
              <label class="form-label"><i class="fa-solid fa-image"></i> Imagen Ficha</label>
              <input type="file" #fileInput1 class="form-control" id="fileInput1" name="fileInput1"
                (change)="handleFileInput($event, 'card')">

            </div>

            <div class="form-group col-md-6">
              <label class="form-label"><i class="fa-solid fa-image"></i> Imagen Portada</label>
              <input type="file" fileInput2 class="form-control" id="fileInput2" name="fileInput2"
                (change)="handleFileInput($event, 'portada')">
            </div>
          </div>
        </div>


        <!--Zona de Meta etiquetado-->

        <!-- Separador con título -->
        <div class="meta-section p-3 mb-4">
          <h4 class="text-center text-secondary"><i class="fa-solid fa-tags"></i> Meta etiquetado</h4>
          <hr>

          <!-- Meta Título -->
          <div class="form-row mb-3">
            <div class="mb-3">
              <label class="form-label"><i class="fa-solid fa-heading"></i> Meta Título</label>
              <textarea class="form-control" maxlength="65"
                placeholder="Descripción de Contenido (65 caracteres máximo)" [(ngModel)]="blogModel.title"
                name="mt"></textarea>
            </div>

            <!-- Meta Description -->
            <div class="mb-3">
              <label class="form-label"><i class="fa-solid fa-pencil-alt"></i> Meta Description</label>
              <textarea class="form-control" maxlength="160"
                placeholder="Descripción de Contenido (160 caracteres máximo)" [(ngModel)]="blogModel.description"
                name="md"></textarea>
            </div>

            <!-- Meta Robots -->
            <div class="form-row d-flex">
              <div class="col-md-4">
                <label class="form-label"><i class="fa-solid fa-robot"></i> Robots</label>
                <select class="form-select" [(ngModel)]="blogModel.robots" name="robots">
                  <option selected [value]="'INDEX, FOLLOW'">INDEX, FOLLOW</option>
                  <option [value]="'NOINDEX, NOFOLLOW'">NOINDEX, NOFOLLOW</option>
                </select>
              </div>
              <!--
              <div class="col-md-2 mt-auto d-flex align-items-center">
                <label class="form-label opPer">
                  <i class="fa-solid fa-share-nodes"></i> OpenGraph
                </label>
                <div class="form-check form-switch d-flex align-items-center">
                  <input class="form-check-input me-2" type="checkbox" name="openGraphSwitch" id="openGraphSwitch"
                    [(ngModel)]="blogModel.openGraph">
                </div>
              </div>
            -->

              <!--
              <div class="col-md-2 mt-auto d-flex align-items-center">
                <label for="metaTwitter" class="form-label opPer">
                  <i class="fa-brands fa-twitter"></i> MetaTwitter
                </label>
                <div class="form-check form-switch d-flex align-items-center">
                  <input class="form-check-input me-2" type="checkbox" name="metaTwitter" id="metaTwitter"
                    [(ngModel)]="blogModel.metaTwitter">
                </div>
              </div>-->

            </div>
          </div>
          <hr>
        </div>


        <!--Zona de Metaetiquetado END-->


        <!--Zona de configuracion de URLs INICIO-->
        <!-- Canonical 
        <div class="mb-3">
          <label class="form-label" for="canonical">URL Canónica</label>
          <input type="text" class="form-control" placeholder="URL Canónica" [(ngModel)]="blogModel.canonical"
            name="canonical">
        </div> -->



        <!--Zona de configuracion de URLs FIN-->



        <!-- Resumen -->
        <div class="mb-3">
          <label class="form-label"><i class="fa-solid fa-clipboard-list"></i> Resumen</label>
          <textarea class="form-control" maxlength="220"
            placeholder="Da un resumen del contenido (220 caracteres máximo)" [(ngModel)]="blogModel.resumen"
            name="resumen"></textarea>
        </div>

        <!--  Status -->
        <div class="row">



          <div class="col-md-6">
            <label class="form-label"><i class="fa-solid fa-toggle-on"></i> Status</label>
            <select class="form-select" [(ngModel)]="blogModel.status" name="id_status">
              <option  selected [value]="'2'">Publico</option>
              <option [value]="'1'">Borrador</option>
            </select>
          </div>
        </div>


          <div class="text-center my-3">
          <button class="btn btn-danger galeria-but" (click)="mostrarGaleria = true">
            <i class="fa-solid fa-image"></i> Abrir Galería de Imágenes
          </button>
        </div>

        <div class="offcanvas-galeria" *ngIf="mostrarGaleria"> <!--Seccion de galeria de elementos-->
          <div class="offcanvas-header">
            <h3>Galería de Imágenes</h3>
            <button class="btn-close" (click)="mostrarGaleria = false">&times;</button>
          </div>
          <div class="offcanvas-body">
            <app-galeria></app-galeria>
          </div>
        </div>


        <div name="div-main" style="margin-top: 10px;">
          <editor [(ngModel)]="blogModel.body" name="editor" [init]="{
        height: 500,
        menubar: true,
        plugins: [
        'advlist', 'anchor', 'autolink', 'autosave', 'code', 'codesample', 'directionality', 
        'emoticons', 'fullscreen', 'help', 'image', 'importcss', 'insertdatetime', 
        'link', 'lists', 'media', 'nonbreaking', 'pagebreak', 'preview', 'save', 
        'searchreplace', 'table', 'visualblocks', 'visualchars', 'wordcount'
      ],
      toolbar:
      'undo redo | bold italic underline strikethrough | fontsizeselect formatselect | ' + 
      'alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist checklist | ' + 
      'forecolor backcolor casechange permanentpen formatpainter removeformat | pagebreak | ' + 
      'charmap emoticons | fullscreen preview print | insertfile image media template link anchor codesample | ' + 
      'ltr rtl | visualblocks visualchars template pagebreak'
  ,  
  images_upload_url: 'https://test.itcun.info/phpCon/upload.php',
  automatic_uploads: true,
        base_url: '/assets/tinymce',
        suffix: '.min',
        content_css: '/assets/tinymce/skins/content/default/content.min.css',
        skin_url: '/assets/tinymce/skins/ui/oxide',
        skin: 'oxide',
        license: 'GPL',
        license_key: 'gpl' 
      }"></editor>


        </div>



        <!-- Botones de acción -->
        <div class="text-center mt-4">
          <button class="btn btn-warning me-2" routerLink="/lista-blogs">
            <i class="fa-solid fa-arrow-rotate-left"></i> Volver a vista
          </button>
          <button class="btn btn-primary" (click)="onSubmit()">
            <i class="fa-solid fa-floppy-disk"></i> Guardar Contenido
          </button>
        </div>

      </form>
    </div>
  </div>
</div>

<!-- Estilos Responsivos -->
<style>
  .form-container {
    max-width: 95%;
    /* 90% en pantallas grandes */
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
  }

  /* En pantallas pequeñas, usa 95% de ancho */
  @media (max-width: 768px) {
    .form-container {
      max-width: 95%;
    }
  }
</style>