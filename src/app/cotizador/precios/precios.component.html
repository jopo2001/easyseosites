<div class="p-3 bg-white rounded shadow-sm border">
  <h2 class="mb-4 text-dark fw-bold border-bottom pb-2">
    <i class="fas fa-dollar-sign me-2 text-success"></i> Precios por Región
  </h2>

  <div class="mb-3">
    <label for="regionSelect" class="form-label">Seleccionar Región:</label>
    <select [(ngModel)]="regionSeleccionada" (change)="cargarPrecios()" class="form-select" id="regionSelect">
      <option *ngFor="let region of regiones" [value]="region.id">{{ region.nombre }}</option>
    </select>
  </div>

  <div class="table-responsive" *ngIf="precios.length > 0; else sinPrecios">
    <table class="table table-striped table-hover align-middle border shadow-sm">
      <thead class="table-light text-dark border-bottom">
        <tr>
          <th>#</th>
          <th>Nombre del Producto</th>
          <th>Precio por m²</th>
          <th style="width: 230px;">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let precio of precios; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ precio.tipo +' '+ precio.nombre }}</td>
          <td>
            <div class="input-group">
              <span class="input-group-text">$</span>
              <input type="number"
                     class="form-control"
                     [(ngModel)]="precio.precio_m2"
                     [ngClass]="{ 'border-danger': precio.precio_m2 === 0 }"
                     min="0"
                     step="0.01">
            </div>
          </td>
          <td>
            <button class="btn btn-sm btn-outline-success me-2" (click)="guardarPrecio(precio)">
              <i class="fas fa-save"></i> Guardar
            </button>
            <a [routerLink]="['/productos/editar', precio.id]" class="btn btn-sm btn-outline-primary">
              <i class="fas fa-edit"></i> Editar
            </a>
                    </td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #sinPrecios>
    <div class="alert alert-warning">
      No hay productos disponibles para esta región.
    </div>
  </ng-template>
</div>
